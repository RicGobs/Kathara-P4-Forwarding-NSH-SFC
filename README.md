# P4 in Kathara - Packet Forwarding according to the SFC architecture

In this project it is implemented a P4 program that instructs switches to perform packet forwarding according to the Service Function Chain (SFC) architecture, based on the Network Service Header (NSH). With reference to the SFC architecture, the Classifier (CL) and the Service Function Forwarder (SFF) are been implemented.

## Topology and requirements 

Let us consider the scenario reported in the figure below, showing an SFC domain connecting two hosts. 

![Network Topology](images/topology.png)

The traffic generated by host H1 and directed to host H2 must be steered through two Service Functions (not shown in the figure because we want to learn the forwarding of the packets): 
- the first one is connected to the switch s3
- the second is accessible through the switch s5 
The two switches then assume the role of SFFs.

In order to steer the traffic through the forementioned service chain, the switch s1 inserts in every packet destined to H2 an NSH having an SPI=100 and initializing the SI=2. It is then acting as a CL. 

The different elements of the SFC architecture are interconnected by pre-configured tunnels.

In particular, the switches s2 and s4 are transparent to the SFC overlay, thus they forward the traffic only looking at the tunnel header. 

Finally, the traffic from H2 to H1 is simply forwarded according to the IPv4 data plane.

## Implementation of the Lab

In the Lab folder, 


## Testing the Lab

